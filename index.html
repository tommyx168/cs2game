<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CS2 私房局选人大厅</title>
  <link rel="stylesheet" href="style.css?v=20251230_7" />
</head>
<body>

  <!-- 进入页 -->
  <div id="entryPage" class="center">
    <div class="panel">
      <h1>先报个号（名字 + 段位）</h1>

      <div class="row">
        <input id="playerInput" placeholder="例：xGonv AK（就一个输入框）" />
        <button id="btnJoin" class="primary">进房</button>
      </div>

      <div id="adminHint" class="hint hidden">你现在是管理员模式。</div>

      <div class="hint">
        规则：大厅最多10人，满了自动进候补（最多4人）。<br/>
        开始对局后：大厅的人点准备，候补不用准备。<br/>
        进入选人：大厅人数为偶数 + 全员准备。<br/>
        选人阶段：随机出蓝/红队长，队长轮流选人（蛇形顺序）。
      </div>
    </div>
  </div>

  <!-- 房间页 -->
  <div id="roomPage" class="wrap hidden">
    <div class="card">
      <div class="topbar">
        <div>
          <div class="titleRow">
            <div class="title">房间：<span id="roomTitle"></span></div>
            <div id="roleBadge" class="badge">游客</div>
          </div>
          <div id="meLine" class="hint"></div>
        </div>

        <div class="row" style="margin:0;">
          <button id="btnSwitch" class="ghost hidden">切换到候补</button>
          <button id="btnReady" class="primary hidden">准备</button>

          <!-- 只给管理员显示 -->
          <button id="btnGoDraft" class="primary hidden">开搞选人</button>

          <button id="btnLeave">退出</button>
        </div>
      </div>

      <!-- 管理员区 -->
      <div id="adminPanel" class="admin hidden">
        <div class="adminTitle">管理员工具箱</div>
        <div class="row">
          <button id="btnStart" class="danger">开始对局</button>
          <button id="btnReset">一键重置</button>
          <button id="btnAdminPeek" class="ghost">管理员查看信息（默认不看）</button>
        </div>
        <div class="hint">踢人：点玩家条右侧“×”。</div>
      </div>

      <!-- 常规列表区 -->
      <div id="normalStage">
        <div class="sectionTitle">大厅（最多10人）</div>
        <div id="playerGrid" class="slots"></div>

        <div class="sectionTitle" style="margin-top:14px;">候补（最多4人，不用准备）</div>
        <div id="waitGrid" class="waitSlots"></div>
      </div>

      <!-- 选人阶段 UI -->
      <div id="draftStage" class="hidden" style="margin-top:14px;">
        <div class="sectionTitle">选人阶段（队长轮流点人）</div>

        <div class="row">
          <div class="card" style="flex:1; min-width:280px;">
            <div class="titleRow" style="justify-content:space-between;">
              <div class="title">蓝队（先选）</div>
              <div id="turnBlue" class="badge">—</div>
            </div>
            <div id="blueTeamBox"></div>
          </div>

          <div class="card" style="flex:1; min-width:280px;">
            <div class="titleRow" style="justify-content:space-between;">
              <div class="title">红队（后选）</div>
              <div id="turnRed" class="badge">—</div>
            </div>
            <div id="redTeamBox"></div>
          </div>
        </div>

        <div class="card">
          <div class="titleRow" style="justify-content:space-between;">
            <div class="title">等待区（还没被选的都在这）</div>
            <div id="pickHint" class="badge">—</div>
          </div>
          <div id="waitingBox" class="slots"></div>
          <div class="hint" id="draftHelpText"></div>
        </div>
      </div>

      <div id="statusBox" class="status">大厅中…</div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-database-compat.js"></script>
  <script src="app.js?v=20251230_7"></script>
</body>
</html>
